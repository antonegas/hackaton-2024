var xe=Object.defineProperty;var Me=(s,e,t)=>e in s?xe(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var u=(s,e,t)=>(Me(s,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function v(){}function _e(s){return s()}function ue(){return Object.create(null)}function K(s){s.forEach(_e)}function ie(s){return typeof s=="function"}function k(s,e){return s!=s?e==e:s!==e||s&&typeof s=="object"||typeof s=="function"}let J;function de(s,e){return s===e?!0:(J||(J=document.createElement("a")),J.href=e,s===J.href)}function Le(s){return Object.keys(s).length===0}function M(s,e){s.appendChild(e)}function b(s,e,t){s.insertBefore(e,t||null)}function _(s){s.parentNode&&s.parentNode.removeChild(s)}function we(s,e){for(let t=0;t<s.length;t+=1)s[t]&&s[t].d(e)}function I(s){return document.createElement(s)}function W(s){return document.createTextNode(s)}function z(){return W(" ")}function Ue(){return W("")}function be(s,e,t,n){return s.addEventListener(e,t,n),()=>s.removeEventListener(e,t,n)}function y(s,e,t){t==null?s.removeAttribute(e):s.getAttribute(e)!==t&&s.setAttribute(e,t)}function Ce(s){return s===""?null:+s}function Re(s){return Array.from(s.childNodes)}function re(s,e){e=""+e,s.data!==e&&(s.data=e)}function fe(s,e){s.value=e??""}let X;function T(s){X=s}function je(){if(!X)throw new Error("Function called outside component initialization");return X}function $e(s){je().$$.on_mount.push(s)}const j=[],N=[];let B=[];const V=[],Be=Promise.resolve();let ee=!1;function ze(){ee||(ee=!0,Be.then(Ee))}function te(s){B.push(s)}function oe(s){V.push(s)}const Z=new Set;let R=0;function Ee(){if(R!==0)return;const s=X;do{try{for(;R<j.length;){const e=j[R];R++,T(e),Ae(e.$$)}}catch(e){throw j.length=0,R=0,e}for(T(null),j.length=0,R=0;N.length;)N.pop()();for(let e=0;e<B.length;e+=1){const t=B[e];Z.has(t)||(Z.add(t),t())}B.length=0}while(j.length);for(;V.length;)V.pop()();ee=!1,Z.clear(),T(s)}function Ae(s){if(s.fragment!==null){s.update(),K(s.before_update);const e=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,e),s.after_update.forEach(te)}}function De(s){const e=[],t=[];B.forEach(n=>s.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),B=e}const G=new Set;let L;function F(){L={r:0,c:[],p:L}}function Y(){L.r||K(L.c),L=L.p}function m(s,e){s&&s.i&&(G.delete(s),s.i(e))}function p(s,e,t,n){if(s&&s.o){if(G.has(s))return;G.add(s),L.c.push(()=>{G.delete(s),n&&(t&&s.d(1),n())}),s.o(e)}else n&&n()}function q(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function le(s,e,t){const n=s.$$.props[e];n!==void 0&&(s.$$.bound[n]=t,t(s.$$.ctx[n]))}function E(s){s&&s.c()}function C(s,e,t){const{fragment:n,after_update:i}=s.$$;n&&n.m(e,t),te(()=>{const o=s.$$.on_mount.map(_e).filter(ie);s.$$.on_destroy?s.$$.on_destroy.push(...o):K(o),s.$$.on_mount=[]}),i.forEach(te)}function $(s,e){const t=s.$$;t.fragment!==null&&(De(t.after_update),K(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Te(s,e){s.$$.dirty[0]===-1&&(j.push(s),ze(),s.$$.dirty.fill(0)),s.$$.dirty[e/31|0]|=1<<e%31}function S(s,e,t,n,i,o,r=null,a=[-1]){const l=X;T(s);const c=s.$$={fragment:null,ctx:[],props:o,update:v,not_equal:i,bound:ue(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:ue(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};r&&r(c.root);let d=!1;if(c.ctx=t?t(s,e.props||{},(f,w,...g)=>{const P=g.length?g[0]:w;return c.ctx&&i(c.ctx[f],c.ctx[f]=P)&&(!c.skip_bound&&c.bound[f]&&c.bound[f](P),d&&Te(s,f)),w}):[],c.update(),d=!0,K(c.before_update),c.fragment=n?n(c.ctx):!1,e.target){if(e.hydrate){const f=Re(e.target);c.fragment&&c.fragment.l(f),f.forEach(_)}else c.fragment&&c.fragment.c();e.intro&&m(s.$$.fragment),C(s,e.target,e.anchor),Ee()}T(l)}class x{constructor(){u(this,"$$");u(this,"$$set")}$destroy(){$(this,1),this.$destroy=v}$on(e,t){if(!ie(t))return v;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!Le(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Oe="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Oe);var H=(s=>(s[s.Move=0]="Move",s[s.Press=1]="Press",s[s.Release=2]="Release",s))(H||{});class he{constructor(e,t){u(this,"mouseEvent");u(this,"type");this.mouseEvent=e,this.type=t}}class h{constructor(e,t){u(this,"x");u(this,"y");this.x=e,this.y=t}static zero(){return new h(0,0)}static add(e,t,n){return new t(e.x+n.x,e.y+n.y)}static subtract(e,t){return new h(e.x-t.x,e.y-t.y)}static divide(e,t){return new h(e.x/t,e.y/t)}static addScaled(e,t,n){return new h(e.x+t.x*n,e.y+t.y*n)}set(e){this.x=e.x,this.y=e.y}multiply(e){this.x*=e,this.y*=e}divide(e){this.x/=e,this.y/=e}addScaled(e,t){this.x+=e.x*t,this.y+=e.y*t}rotate90DegreesCCW(){const e=this.x;this.x=-this.y,this.y=e}getLength(){return Math.sqrt(this.x*this.x+this.y*this.y)}getLengthSquared(){return this.x*this.x+this.y*this.y}getAngle(){return Math.atan2(this.y,this.x)}normalize(){this.divide(this.getLength())}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-e.x*this.y}}class Pe{constructor(){u(this,"position");u(this,"nextPosition");u(this,"velocity");u(this,"acceleration");u(this,"invertedMass");this.position=h.zero(),this.nextPosition=h.zero(),this.velocity=h.zero(),this.acceleration=h.zero(),this.invertedMass=1}}class Ie{constructor(e,t){u(this,"pointMass");u(this,"radius");this.pointMass=e,this.radius=t}}function ne(s,e,t,n){s.save(),s.beginPath();const i=n*e.width,o=n*e.height,r=.5*i,a=.5*o;s.translate(t.x-r,t.y+a),s.scale(1,-1),s.drawImage(e,0,0,i,o),s.restore()}class Xe{constructor(e,t,n){u(this,"level");u(this,"circleCollider");u(this,"image");u(this,"steeringDirection");u(this,"gun");u(this,"aimTarget");this.level=e,this.circleCollider=t,this.image=n,this.steeringDirection=0,this.gun=null,this.aimTarget=h.zero()}tick(e){this.circleCollider.pointMass.acceleration.x=10*this.steeringDirection}jump(){this.circleCollider.pointMass.velocity.y+=10}shoot(){this.gun.shoot(this)}render(){const e=this.level.game.renderer,t=this.circleCollider.pointMass.position,n=this.circleCollider.radius;e.save(),e.translate(t.x,t.y),e.save();const i=-t.x/n;e.rotate(i),e.beginPath(),e.lineWidth=0,e.strokeStyle="white",e.arc(0,0,n,0,2*Math.PI),e.stroke(),e.clip();const o=.5*this.image.width,r=.5*this.image.height;let a=n/(o>r?r:o);if(ne(e,this.image,h.zero(),a),e.restore(),this.gun){e.save(),e.beginPath();const l=h.subtract(this.aimTarget,t);l.getLengthSquared()<.001&&(l.x=1,l.y=0);const c=l.getAngle();e.rotate(c);let d=new h(.5*this.gun.image.width,.5*this.gun.image.height);d.x-=this.gun.centerX,d.y-=this.gun.y,d.x*=this.gun.scale,d.y*=-this.gun.scale,ne(e,this.gun.image,d,this.gun.scale),e.restore()}e.restore()}}class Ne{constructor(){u(this,"image");u(this,"centerX");u(this,"shootX");u(this,"y");u(this,"scale");u(this,"bulletImage");u(this,"bulletScale");u(this,"bulletHitRadius")}Gun(e,t,n,i,o,r,a,l){this.image=e,this.centerX=t,this.shootX=n,this.y=i,this.scale=o,this.bulletImage=r,this.bulletScale=a,this.bulletHitRadius=l}shoot(e){const t=e.circleCollider.pointMass.position,n=h.subtract(e.aimTarget,t);n.normalize();let i=new Pe;i.position.set(t),i.position.addScaled(n,this.shootX*this.scale),i.velocity.set(n),i.velocity.multiply(100);let o=new Ie(i,this.bulletHitRadius);e.level.spawnBullet(this,o,e)}}class He{constructor(e,t,n){u(this,"gun");u(this,"circleCollider");u(this,"shooter");this.gun=e,this.circleCollider=t,this.shooter=n}onPlayerHit(e){e.circleCollider.pointMass.velocity.addScaled(this.circleCollider.pointMass.velocity,.1)}render(){console.log(this.circleCollider.pointMass.position),ne(this.shooter.level.game.renderer,this.gun.bulletImage,this.circleCollider.pointMass.position,this.gun.bulletScale)}}class A{constructor(e,t){u(this,"start");u(this,"end");u(this,"normal");this.start=e,this.end=t,this.normal=h.subtract(t,e),this.normal.rotate90DegreesCCW(),this.normal.normalize()}}class ae{constructor(){u(this,"pointMasses");u(this,"circleColliders");u(this,"edgeColliders");u(this,"subSteps");u(this,"collisionListener");this.pointMasses=[],this.circleColliders=[],this.edgeColliders=[],this.subSteps=10,this.collisionListener=null}addPointMass(e){this.pointMasses.push(e)}addCircleCollider(e){this.circleColliders.push(e)}addEdgeCollider(e){this.edgeColliders.push(e)}tick(e){const t=e/this.subSteps;for(let n=0;n<this.subSteps;n++){for(let i of this.pointMasses)i.velocity.addScaled(i.acceleration,t),i.nextPosition.set(h.addScaled(i.position,i.velocity,t));this.solveConstraintsLocally();for(let i of this.pointMasses)i.velocity.set(h.divide(h.subtract(i.nextPosition,i.position),t)),i.position.set(i.nextPosition)}}solveConstraintsLocally(){this.solveDistanceConstraintsLocally(),this.solveCollisionsLocally()}solveDistanceConstraintsLocally(){}solveCollisionsLocally(){this.solveCircleCollisionsLocally(),this.solveEdgeCollisionsLocally()}solveCircleCollisionsLocally(){}solveEdgeCollisionsLocally(){for(let e of this.circleColliders){let t=e.pointMass;const n=h.subtract(t.nextPosition,t.position);for(const i of this.edgeColliders){if(n.dot(i.normal)>0)continue;const o=h.addScaled(t.position,i.normal,-e.radius),r=h.subtract(i.end,i.start);if(ae.findIntersection(o,n,i.start,r)!=null){const l=e.radius-h.subtract(t.nextPosition,i.start).dot(i.normal);t.nextPosition.addScaled(i.normal,l),this.collisionListener&&this.collisionListener.onEdgeCollision(e,i)}}}}static findIntersection(e,t,n,i){const o=t.cross(i);if(Math.abs(o)<1e-7)return null;const r=h.subtract(n,e),a=r.cross(i)/o,l=-t.cross(r)/o,c=1;return-c<a&&a<1+c&&0<l&&l<1?h.addScaled(e,t,a):null}}const O=class O{constructor(e,t){u(this,"game");u(this,"camera");u(this,"physicsEngine");u(this,"players");u(this,"controlledPlayer");u(this,"jumpCounter");u(this,"bullets");this.game=e,this.camera=new h(10,10),this.physicsEngine=new ae,this.physicsEngine.collisionListener=this;let n=new Pe;n.position.x=3,n.position.y=-3,n.velocity.set(new h(2,10)),n.acceleration.set(new h(0,-9.81));let i=new Ie(n,1);this.physicsEngine.addEdgeCollider(new A(new h(-5,-3),new h(5,-3))),this.physicsEngine.addEdgeCollider(new A(new h(-8,2),new h(-4,1))),this.physicsEngine.addEdgeCollider(new A(new h(4,1),new h(8,2))),this.physicsEngine.addEdgeCollider(new A(new h(4,6),new h(6,6))),this.physicsEngine.addEdgeCollider(new A(new h(-9,8),new h(-8,-8))),this.physicsEngine.addPointMass(n),this.physicsEngine.addCircleCollider(i),this.controlledPlayer=new Xe(this,i,t),this.players=[this.controlledPlayer],this.jumpCounter=O.maxJumpCounter,this.bullets=[],this.controlledPlayer.gun=this.game.pistol}tick(e){this.handleKeyEvents(),this.handleMouse();for(let t of this.players)t.tick(e);this.physicsEngine.tick(e)}handleKeyEvents(){for(;this.game.hasKeyEvents();){const e=this.game.popKeyEvent(),t=e.keyboardEvent.key;e.pressed?t=="a"?this.controlledPlayer.steeringDirection=-1:t=="d"?this.controlledPlayer.steeringDirection=1:(t=="w"||t==" ")&&this.jumpCounter>0&&(this.controlledPlayer.jump(),this.jumpCounter--):t=="a"?this.controlledPlayer.steeringDirection==-1&&(this.controlledPlayer.steeringDirection=0):t=="d"&&this.controlledPlayer.steeringDirection==1&&(this.controlledPlayer.steeringDirection=0)}}handleMouse(){for(;this.game.hasMouseEvents();){const e=this.game.popMouseEvent();e.type==H.Press?this.controlledPlayer.shoot():e.type==H.Release}this.controlledPlayer.aimTarget.set(this.transformCanvasPoint(this.game.mousePosition))}spawnBullet(e,t,n){this.bullets.push(new He(e,t,n)),this.physicsEngine.addPointMass(t.pointMass),this.physicsEngine.addCircleCollider(t)}transformCanvasPoint(e){const t=this.computeScale(),n=this.game.renderer.canvas,i=new h(.5*n.width,.5*n.height);let o=h.subtract(e,i);return o.y*=-1,o.divide(t),o}onEdgeCollision(e,t){if(!(t.normal.y<.5))for(let n of this.players)n.circleCollider==e&&(this.jumpCounter=O.maxJumpCounter)}render(){const e=this.game.renderer,t=e.canvas,n=.5*t.width,i=.5*t.height;e.translate(n,i),e.scale(1,-1);const o=this.camera.x/this.camera.y,r=n/i;let a;r>o?a=i/this.camera.y:a=n/this.camera.x,e.scale(a,a),this.renderBullets();for(const l of this.players)l.render();this.renderEdges(),e.resetTransform()}renderBullets(){for(const e of this.bullets)e.render()}renderEdges(){const e=this.game.renderer;for(const t of this.physicsEngine.edgeColliders){const n=t.start,i=t.end;e.strokeStyle="white",e.lineWidth=.1,e.moveTo(n.x,n.y),e.lineTo(i.x,i.y),e.stroke()}}computeScale(){const t=this.game.renderer.canvas,n=.5*t.width,i=.5*t.height,o=this.camera.x/this.camera.y,r=n/i;let a;return r>o?a=i/this.camera.y:a=n/this.camera.x,a}};u(O,"maxJumpCounter",1);let se=O;const Ke="/assets/Trollface-u5UwsbbF.png";class me{constructor(e,t){u(this,"keyboardEvent");u(this,"pressed");this.keyboardEvent=e,this.pressed=t}}const We={image:"src/assets/pistol/pistol.png",position:{centerX:428,shootX:966,y:521}},Je="src/assets/explosionGif.gif",Ge="src/assets/bullet.png",D={weapon:We,shootEffect:Je,bullet:Ge};class qe{constructor(e){u(this,"renderer");u(this,"currentLevel");u(this,"keyEvents");u(this,"mouseEvents");u(this,"mousePosition");u(this,"pistol");this.renderer=e,this.currentLevel=null,this.keyEvents=[],this.mouseEvents=[],this.pistol=null,this.mousePosition=h.zero()}async load(){let e=new Image;e.src=Ke;let t=new Image;t.src=D.weapon.image;let n=new Image;n.src=D.bullet,this.pistol=new Ne;const i=.002;return this.pistol.centerX=D.weapon.position.centerX,this.pistol.shootX=D.weapon.position.shootX,this.pistol.y=D.weapon.position.y,this.pistol.scale=i,this.pistol.bulletScale=.001,this.pistol.bulletHitRadius=.1,Promise.all([e.decode().then(()=>{createImageBitmap(e).then(o=>{this.currentLevel=new se(this,o)})}),t.decode().then(()=>{createImageBitmap(t).then(o=>{this.pistol.image=o})}),n.decode().then(()=>{createImageBitmap(n).then(o=>{this.pistol.bulletImage=o})})]).then(()=>{this.currentLevel.controlledPlayer.gun=this.pistol})}onKeyPressed(e){const t=new me(e,!0);t.keyboardEvent.repeat||this.keyEvents.push(t)}onKeyReleased(e){this.keyEvents.push(new me(e,!1))}onMouseMoved(e){this.mousePosition.x=e.offsetX,this.mousePosition.y=e.offsetY}onMousePressed(e){this.mouseEvents.push(new he(e,H.Press))}onMouseReleased(e){this.mouseEvents.push(new he(e,H.Release))}tick(e){this.currentLevel.tick(e)}hasKeyEvents(){return this.keyEvents.length!=0}hasMouseEvents(){return this.mouseEvents.length!=0}popKeyEvent(){return this.keyEvents.pop()}popMouseEvent(){return this.mouseEvents.pop()}render(){this.clear(),this.currentLevel.render()}clear(){const e=this.renderer.canvas;this.renderer.clearRect(0,0,e.width,e.height)}}function Fe(s){let e;return{c(){e=I("div"),e.innerHTML='<canvas width="900" height="500" id="canvas" class="svelte-ahd8mu"></canvas>',y(e,"class","svelte-ahd8mu")},m(t,n){b(t,e,n)},p:v,i:v,o:v,d(t){t&&_(e)}}}function Ye(s){return $e(()=>{const t=document.getElementById("canvas").getContext("2d");let n=new qe(t),i=16,o=i*.001;n.load().then(()=>{window.addEventListener("keydown",a=>n.onKeyPressed(a)),window.addEventListener("keyup",a=>n.onKeyReleased(a)),window.addEventListener("mousemove",a=>n.onMouseMoved(a)),window.addEventListener("mousedown",a=>n.onMousePressed(a)),window.addEventListener("mouseup",a=>n.onMouseReleased(a));const r=setInterval(()=>{n.tick(o),n.render()},i);return()=>clearInterval(r)})}),[]}class Qe extends x{constructor(e){super(),S(this,e,Ye,Fe,k,{})}}function Ze(s){let e,t,n,i;return{c(){e=I("button"),t=W(s[1]),y(e,"class","svelte-t4zgcp")},m(o,r){b(o,e,r),M(e,t),n||(i=be(e,"click",function(){ie(s[0])&&s[0].apply(this,arguments)}),n=!0)},p(o,[r]){s=o,r&2&&re(t,s[1])},i:v,o:v,d(o){o&&_(e),n=!1,i()}}}function Ve(s,e,t){let{action:n}=e,{description:i}=e;return s.$$set=o=>{"action"in o&&t(0,n=o.action),"description"in o&&t(1,i=o.description)},[n,i]}class Q extends x{constructor(e){super(),S(this,e,Ve,Ze,k,{action:0,description:1})}}function et(s){let e,t,n;return t=new Q({props:{action:tt,description:"Continue with Discord"}}),{c(){e=I("div"),E(t.$$.fragment),y(e,"class","wrapper svelte-xfmem0")},m(i,o){b(i,e,o),C(t,e,null),n=!0},p:v,i(i){n||(m(t.$$.fragment,i),n=!0)},o(i){p(t.$$.fragment,i),n=!1},d(i){i&&_(e),$(t)}}}function tt(){window.location.replace("https://discord.com/api/oauth2/authorize?client_id=1200515855537160323&response_type=token&redirect_uri=http%3A%2F%2Flocalhost%3A5173%2F&scope=identify")}class nt extends x{constructor(e){super(),S(this,e,null,et,k,{})}}function st(s){let e,t,n,i,o,r;return{c(){e=I("div"),t=I("img"),i=z(),o=I("p"),r=W(s[0]),y(t,"class","avatar svelte-141udiu"),de(t.src,n=s[1])||y(t,"src",n),y(o,"class","svelte-141udiu"),y(e,"class","wrapper svelte-141udiu")},m(a,l){b(a,e,l),M(e,t),M(e,i),M(e,o),M(o,r)},p(a,[l]){l&2&&!de(t.src,n=a[1])&&y(t,"src",n),l&1&&re(r,a[0])},i:v,o:v,d(a){a&&_(e)}}}function it(s,e,t){let{username:n}=e,{avatarUrl:i}=e;return s.$$set=o=>{"username"in o&&t(0,n=o.username),"avatarUrl"in o&&t(1,i=o.avatarUrl)},[n,i]}class ke extends x{constructor(e){super(),S(this,e,it,st,k,{username:0,avatarUrl:1})}}function rt(s){let e,t;return e=new Q({props:{action:s[2],description:"Create Party"}}),{c(){E(e.$$.fragment)},m(n,i){C(e,n,i),t=!0},p:v,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function ot(s){let e,t;return e=new Q({props:{action:s[6],description:"Join Party"}}),{c(){E(e.$$.fragment)},m(n,i){C(e,n,i),t=!0},p(n,i){const o={};i&1&&(o.action=n[6]),e.$set(o)},i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function lt(s){let e,t,n,i,o,r,a,l,c;const d=[ot,rt],f=[];function w(g,P){return P&1&&(t=null),t==null&&(t=!!Number.isSafeInteger(g[0])),t?0:1}return n=w(s,-1),i=f[n]=d[n](s),{c(){e=I("div"),i.c(),o=z(),r=I("input"),y(r,"type","number"),y(r,"placeholder","Party Code"),y(r,"class","svelte-1h8i5ft"),y(e,"class","wrapper svelte-1h8i5ft")},m(g,P){b(g,e,P),f[n].m(e,null),M(e,o),M(e,r),fe(r,s[0]),a=!0,l||(c=be(r,"input",s[7]),l=!0)},p(g,[P]){let U=n;n=w(g,P),n===U?f[n].p(g,P):(F(),p(f[U],1,1,()=>{f[U]=null}),Y(),i=f[n],i?i.p(g,P):(i=f[n]=d[n](g),i.c()),m(i,1),i.m(e,o)),P&1&&Ce(r.value)!==g[0]&&fe(r,g[0])},i(g){a||(m(i),a=!0)},o(g){p(i),a=!1},d(g){g&&_(e),f[n].d(),l=!1,c()}}}function at(s,e,t){let{username:n}=e,{avatarUrl:i}=e,{partyId:o=null}=e,r;function a(f){t(3,o=f)}function l(){let f={method:"POST",body:`${n} ${i}`,headers:{"Content-Type":"application/json"}};fetch("/create",f).then(w=>{}).catch(console.error)}const c=()=>a(r);function d(){r=Ce(this.value),t(0,r)}return s.$$set=f=>{"username"in f&&t(4,n=f.username),"avatarUrl"in f&&t(5,i=f.avatarUrl),"partyId"in f&&t(3,o=f.partyId)},[r,a,l,o,n,i,c,d]}class ct extends x{constructor(e){super(),S(this,e,at,lt,k,{username:4,avatarUrl:5,partyId:3})}}function pe(s,e,t){const n=s.slice();return n[3]=e[t],n[5]=t,n}function ge(s){let e,t=s[3]+"",n,i;return{c(){e=I("span"),n=W(t),y(e,"style",i=`--duration: ${s[1]}s; --delay: ${s[2]*s[5]}s;`),y(e,"class","svelte-pw2ee1")},m(o,r){b(o,e,r),M(e,n)},p(o,r){r&1&&t!==(t=o[3]+"")&&re(n,t),r&6&&i!==(i=`--duration: ${o[1]}s; --delay: ${o[2]*o[5]}s;`)&&y(e,"style",i)},d(o){o&&_(e)}}}function ut(s){let e,t=q(s[0].split("")),n=[];for(let i=0;i<t.length;i+=1)n[i]=ge(pe(s,t,i));return{c(){e=I("h1");for(let i=0;i<n.length;i+=1)n[i].c();y(e,"class","svelte-pw2ee1")},m(i,o){b(i,e,o);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(e,null)},p(i,[o]){if(o&7){t=q(i[0].split(""));let r;for(r=0;r<t.length;r+=1){const a=pe(i,t,r);n[r]?n[r].p(a,o):(n[r]=ge(a),n[r].c(),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=t.length}},i:v,o:v,d(i){i&&_(e),we(n,i)}}}function dt(s,e,t){let n,{text:i}=e,{duration:o}=e;return s.$$set=r=>{"text"in r&&t(0,i=r.text),"duration"in r&&t(1,o=r.duration)},s.$$.update=()=>{s.$$.dirty&3&&t(2,n=o/i.length)},[i,o,n]}class Se extends x{constructor(e){super(),S(this,e,dt,ut,k,{text:0,duration:1})}}function ft(s){let e,t,n,i,o;e=new ke({props:{username:s[1],avatarUrl:s[2]}});function r(l){s[4](l)}let a={username:s[1],avatarUrl:s[2]};return s[0]!==void 0&&(a.partyId=s[0]),n=new ct({props:a}),N.push(()=>le(n,"partyId",r)),{c(){E(e.$$.fragment),t=z(),E(n.$$.fragment)},m(l,c){C(e,l,c),b(l,t,c),C(n,l,c),o=!0},p(l,c){const d={};c&2&&(d.username=l[1]),c&4&&(d.avatarUrl=l[2]),e.$set(d);const f={};c&2&&(f.username=l[1]),c&4&&(f.avatarUrl=l[2]),!i&&c&1&&(i=!0,f.partyId=l[0],oe(()=>i=!1)),n.$set(f)},i(l){o||(m(e.$$.fragment,l),m(n.$$.fragment,l),o=!0)},o(l){p(e.$$.fragment,l),p(n.$$.fragment,l),o=!1},d(l){l&&_(t),$(e,l),$(n,l)}}}function ht(s){let e,t;return e=new nt({}),{c(){E(e.$$.fragment)},m(n,i){C(e,n,i),t=!0},p:v,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function mt(s){let e,t,n,i,o,r;e=new Se({props:{text:"Ball Pit",duration:2}});const a=[ht,ft],l=[];function c(d,f){return d[3]?1:0}return i=c(s),o=l[i]=a[i](s),{c(){E(e.$$.fragment),t=z(),n=I("div"),o.c(),y(n,"class","info-wrapper")},m(d,f){C(e,d,f),b(d,t,f),b(d,n,f),l[i].m(n,null),r=!0},p(d,[f]){let w=i;i=c(d),i===w?l[i].p(d,f):(F(),p(l[w],1,1,()=>{l[w]=null}),Y(),o=l[i],o?o.p(d,f):(o=l[i]=a[i](d),o.c()),m(o,1),o.m(n,null))},i(d){r||(m(e.$$.fragment,d),m(o),r=!0)},o(d){p(e.$$.fragment,d),p(o),r=!1},d(d){d&&(_(t),_(n)),$(e,d),l[i].d()}}}function pt(s,e,t){let{username:n}=e,{avatarUrl:i}=e,{signedIn:o}=e,{partyId:r}=e;function a(l){r=l,t(0,r)}return s.$$set=l=>{"username"in l&&t(1,n=l.username),"avatarUrl"in l&&t(2,i=l.avatarUrl),"signedIn"in l&&t(3,o=l.signedIn),"partyId"in l&&t(0,r=l.partyId)},[r,n,i,o,a]}class gt extends x{constructor(e){super(),S(this,e,pt,mt,k,{username:1,avatarUrl:2,signedIn:3,partyId:0})}}function ye(s,e,t){const n=s.slice();return n[1]=e[t],n}function ve(s){let e,t;return e=new ke({props:{username:s[1].username,avatarUrl:s[1].avatarUrl}}),{c(){E(e.$$.fragment)},m(n,i){C(e,n,i),t=!0},p(n,i){const o={};i&1&&(o.username=n[1].username),i&1&&(o.avatarUrl=n[1].avatarUrl),e.$set(o)},i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function yt(s){let e,t,n=q(s[0]),i=[];for(let r=0;r<n.length;r+=1)i[r]=ve(ye(s,n,r));const o=r=>p(i[r],1,1,()=>{i[r]=null});return{c(){e=I("div");for(let r=0;r<i.length;r+=1)i[r].c();y(e,"class","info-wrapper")},m(r,a){b(r,e,a);for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(e,null);t=!0},p(r,[a]){if(a&1){n=q(r[0]);let l;for(l=0;l<n.length;l+=1){const c=ye(r,n,l);i[l]?(i[l].p(c,a),m(i[l],1)):(i[l]=ve(c),i[l].c(),m(i[l],1),i[l].m(e,null))}for(F(),l=n.length;l<i.length;l+=1)o(l);Y()}},i(r){if(!t){for(let a=0;a<n.length;a+=1)m(i[a]);t=!0}},o(r){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)p(i[a]);t=!1},d(r){r&&_(e),we(i,r)}}}function vt(s,e,t){let{users:n}=e;return s.$$set=i=>{"users"in i&&t(0,n=i.users)},[n]}class _t extends x{constructor(e){super(),S(this,e,vt,yt,k,{users:0})}}function wt(s){let e,t,n,i,o,r,a;return e=new Se({props:{text:s[1].toString(),duration:2}}),n=new _t({props:{users:s[0]}}),r=new Q({props:{action:s[5],description:"Start Party"}}),{c(){E(e.$$.fragment),t=z(),E(n.$$.fragment),i=z(),o=I("div"),E(r.$$.fragment),y(o,"class","center-button svelte-11vd7e7")},m(l,c){C(e,l,c),b(l,t,c),C(n,l,c),b(l,i,c),b(l,o,c),C(r,o,null),a=!0},p(l,[c]){const d={};c&2&&(d.text=l[1].toString()),e.$set(d);const f={};c&1&&(f.users=l[0]),n.$set(f);const w={};c&2&&(w.action=l[5]),r.$set(w)},i(l){a||(m(e.$$.fragment,l),m(n.$$.fragment,l),m(r.$$.fragment,l),a=!0)},o(l){p(e.$$.fragment,l),p(n.$$.fragment,l),p(r.$$.fragment,l),a=!1},d(l){l&&(_(t),_(i),_(o)),$(e,l),$(n,l),$(r)}}}function bt(s,e,t){let{users:n}=e,{owner:i=!1}=e,{id:o}=e,{started:r}=e;function a(c){t(3,r=!0)}const l=()=>{a()};return s.$$set=c=>{"users"in c&&t(0,n=c.users),"owner"in c&&t(4,i=c.owner),"id"in c&&t(1,o=c.id),"started"in c&&t(3,r=c.started)},[n,o,a,r,i,l]}class Ct extends x{constructor(e){super(),S(this,e,bt,wt,k,{users:0,owner:4,id:1,started:3})}}function $t(s){let e,t,n;function i(r){s[6](r)}let o={id:s[0],users:[{username:s[3],avatarUrl:s[4]},{username:"JSON",avatarUrl:"https://api.dicebear.com/7.x/thumbs/svg?seed=JSON"},{username:"ChatGPT",avatarUrl:"https://api.dicebear.com/7.x/thumbs/svg?seed=ChatGPT"},{username:"SvettLigan",avatarUrl:"https://api.dicebear.com/7.x/thumbs/svg?seed=SvettLigan"},{username:"RustBorrowChecker",avatarUrl:"https://api.dicebear.com/7.x/thumbs/svg?seed=RustBorrowChecker"}],owner:!0};return s[1]!==void 0&&(o.started=s[1]),e=new Ct({props:o}),N.push(()=>le(e,"started",i)),{c(){E(e.$$.fragment)},m(r,a){C(e,r,a),n=!0},p(r,a){const l={};a&1&&(l.id=r[0]),!t&&a&2&&(t=!0,l.started=r[1],oe(()=>t=!1)),e.$set(l)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){p(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function Et(s){let e,t;return e=new Qe({}),{c(){E(e.$$.fragment)},m(n,i){C(e,n,i),t=!0},p:v,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function Pt(s){let e,t,n;function i(r){s[5](r)}let o={username:s[3],avatarUrl:s[4],signedIn:s[2]};return s[0]!==void 0&&(o.partyId=s[0]),e=new gt({props:o}),N.push(()=>le(e,"partyId",i)),{c(){E(e.$$.fragment)},m(r,a){C(e,r,a),n=!0},p(r,a){const l={};!t&&a&1&&(t=!0,l.partyId=r[0],oe(()=>t=!1)),e.$set(l)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){p(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function It(s){let e,t,n,i,o;const r=[Pt,Et,$t],a=[];function l(c,d){return d&1&&(e=null),e==null&&(e=!Number.isSafeInteger(c[0])),e?0:c[1]?1:2}return t=l(s,-1),n=a[t]=r[t](s),{c(){n.c(),i=Ue()},m(c,d){a[t].m(c,d),b(c,i,d),o=!0},p(c,[d]){let f=t;t=l(c,d),t===f?a[t].p(c,d):(F(),p(a[f],1,1,()=>{a[f]=null}),Y(),n=a[t],n?n.p(c,d):(n=a[t]=r[t](c),n.c()),m(n,1),n.m(i.parentNode,i))},i(c){o||(m(n),o=!0)},o(c){p(n),o=!1},d(c){c&&_(i),a[t].d(c)}}}function kt(s,e,t){let n=localStorage.getItem("signedIn")==="true",i=localStorage.getItem("username"),o=localStorage.getItem("avatarUrl"),r=null,a=!1;$e(()=>{const d=new URLSearchParams(window.location.hash.slice(1)),[f,w]=[d.get("access_token"),d.get("token_type")];f&&fetch("https://discord.com/api/users/@me",{headers:{authorization:`${w} ${f}`}}).then(g=>g.json()).then(g=>{const{id:P,username:U,avatar:ce}=g;localStorage.setItem("signedIn","true"),localStorage.setItem("username",U),ce?localStorage.setItem("avatarUrl",`https://cdn.discordapp.com/avatars/${P}/${ce}.png`):localStorage.setItem("avatarUrl",`https://api.dicebear.com/7.x/thumbs/svg?seed=${U}`),window.location.href="/"}).catch(console.error)});function l(d){r=d,t(0,r)}function c(d){a=d,t(1,a)}return[r,a,n,i,o,l,c]}class St extends x{constructor(e){super(),S(this,e,kt,It,k,{})}}new St({target:document.getElementById("app")});
